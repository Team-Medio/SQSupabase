# #6 μ°¨νΈ λ°ν™κ°’ λ³€κ²½ PR μ‘μ—… λ‚΄μ©

## π― μ‘μ—… κ°μ”
μ°¨νΈ APIμ μ‘λ‹µ κµ¬μ΅°λ¥Ό κ°μ„ ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„±κ³µ/μ‹¤ν¨ μΌ€μ΄μ¤λ¥Ό λ” λ…ν™•ν•κ² μ²λ¦¬ν•  μ μλ„λ΅ λ°ν™κ°’ κµ¬μ΅°λ¥Ό λ³€κ²½ν–μµλ‹λ‹¤.

## π”„ μ£Όμ” λ³€κ²½μ‚¬ν•­

### 1. μ°¨νΈ μ±„λ„ API μ‘λ‹µ κµ¬μ΅° κ°μ„ 

#### **GetMostChannels.ts** (κ°€μ¥ λ§μ΄ sqoopλ μ±„λ„)
- **κΈ°μ΅΄**: λ‹¨μ μ±„λ„ μ •λ³΄ λ°°μ—΄ λ°ν™
- **λ³€κ²½**: μ„±κ³µ/μ‹¤ν¨λ¥Ό κµ¬λ¶„ν•λ” `MostChannelInfoResult` κµ¬μ΅° λ„μ…
  ```typescript
  // μƒλ΅μ΄ μ‘λ‹µ κµ¬μ΅°
  type MostChannelInfoResult = {
    success: ChannelWithSqoopCount | null;
    failed: string | null;
  };

  // μ±„λ„ μ •λ³΄μ— sqoop_count μ¶”κ°€
  type ChannelWithSqoopCount = {
    channel_id: string;
    channel_name: string;
    channel_thumbnail: string;
    sqoop_count: number;  // μƒλ΅ μ¶”κ°€λ ν•„λ“
  };
  ```

#### **GetRecentChannels.ts** (μµκ·Ό sqoopλ μ±„λ„)
- **κΈ°μ΅΄**: λ‹¨μ μ±„λ„ μ •λ³΄ λ°°μ—΄ λ°ν™
- **λ³€κ²½**: μ„±κ³µ/μ‹¤ν¨λ¥Ό κµ¬λ¶„ν•λ” `RecentChannelInfoResult` κµ¬μ΅° λ„μ…
  ```typescript
  // μƒλ΅μ΄ μ‘λ‹µ κµ¬μ΅°
  type RecentChannelInfoResult = {
    success: RecentChannelInfo | null;
    failed: string | null;
  };

  // μ±„λ„ κΈ°λ³Έ μ •λ³΄ + μΈλ„¤μΌ μ¶”κ°€
  type RecentChannelInfo = {
    channel_id: string;
    channel_name: string;
    channel_thumbnail: string;  // μƒλ΅ μ¶”κ°€λ ν•„λ“
  };
  ```

### 2. μ°¨νΈ ν”λ μ΄λ¦¬μ¤νΈ API μ‘λ‹µ κµ¬μ΅° κ°μ„ 

#### **ChartPlaylists.ts**
- **κΈ°μ΅΄**: λ‹¨μ ν”λ μ΄λ¦¬μ¤νΈ μ •λ³΄ λ°°μ—΄ λ°ν™
- **λ³€κ²½**: μ„±κ³µ/μ‹¤ν¨λ¥Ό κµ¬λ¶„ν•λ” `RequestPlaylistHeadResult` κµ¬μ΅° μ μ§€ λ° κ°μ„ 
  ```typescript
  type RequestPlaylistHeadResult = {
    success: YTPlaylistHead | null;
    failed: string | null;
  };
  ```

### 3. μ—λ¬ μ²λ¦¬ λ° μ•μ •μ„± κ°μ„ 

#### **ChannelHelper.ts** ν™μ©
- μΈλ„¤μΌμ΄ μ—†λ” μ±„λ„μ κ²½μ° YouTube APIλ¥Ό ν†µν•΄ μλ™μΌλ΅ μΈλ„¤μΌ μ •λ³΄λ¥Ό κ°€μ Έμ™€μ„ μ—…λ°μ΄νΈ
- API νΈμ¶ μ‹¤ν¨ μ‹ μ μ ν• μ—λ¬ μ²λ¦¬ λ° μ‹¤ν¨ μ‘λ‹µ λ°ν™

#### κ°μ„ λ μ—λ¬ μ²λ¦¬
- κ° μ±„λ„/ν”λ μ΄λ¦¬μ¤νΈ μ •λ³΄ μ΅°ν μ‹¤ν¨ μ‹ μ „μ²΄ μ”μ²­μ΄ μ‹¤ν¨ν•μ§€ μ•κ³ , κ°λ³„ μ‹¤ν¨ ν•­λ©λ§ `failed` ν•„λ“μ— κΈ°λ΅
- ν΄λΌμ΄μ–ΈνΈμ—μ„ λ¶€λ¶„μ  μ„±κ³µ μΌ€μ΄μ¤λ¥Ό μ μ ν μ²λ¦¬ν•  μ μλ„λ΅ κµ¬μ΅° κ°μ„ 

## π§ ν…μ¤νΈ κ²€μ¦

### ν…μ¤νΈ μ—”λ“ν¬μΈνΈ
1. **μ°¨νΈ μ±„λ„ - μµκ·Ό**: `/charts/channels?filter=recent&limitcount=10`
2. **μ°¨νΈ μ±„λ„ - μΈκΈ°**: `/charts/channels?filter=most&period=week&date=2025-08-12&limitcount=10`
3. **μ°¨νΈ ν”λ μ΄λ¦¬μ¤νΈ - μµκ·Ό**: `/charts/playlists?filter=recent&limitcount=10`
4. **μ°¨νΈ ν”λ μ΄λ¦¬μ¤νΈ - μΈκΈ°**: `/charts/playlists?filter=most&period=week&date=2025-08-12&limitcount=10`

### ν…μ¤νΈ μ¤ν¬λ¦½νΈ μ—…λ°μ΄νΈ
- `scripts/test_cli/api_test/charts_functions.py`μ—μ„ μƒλ΅μ΄ μ‘λ‹µ κµ¬μ΅°μ— λ§λ” ν…μ¤νΈ μ½”λ“ ν™•μΈ
- λ€ν™”ν• ν…μ¤νΈ λ¨λ“λ¥Ό ν†µν•΄ μ‹¤μ  API μ‘λ‹µ κ²€μ¦ κ°€λ¥

## π“ κΈ°λ€ ν¨κ³Ό

### 1. ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ κ°μ„ 
- **λ…ν™•ν• μ—λ¬ μ²λ¦¬**: μ„±κ³µ/μ‹¤ν¨κ°€ λ…ν™•ν κµ¬λ¶„λμ–΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ μ ν• UI μ²λ¦¬ κ°€λ¥
- **λ¶€λ¶„μ  μ„±κ³µ μ§€μ›**: μΌλ¶€ λ°μ΄ν„° λ΅λ”© μ‹¤ν¨ μ‹μ—λ„ μ„±κ³µν• λ°μ΄ν„°λ” ν‘μ‹ κ°€λ¥
- **μ¶”κ°€ μ •λ³΄ μ κ³µ**: μ±„λ„ μΈλ„¤μΌ, sqoop μΉ΄μ΄νΈ λ“± UIμ— ν•„μ”ν• μ •λ³΄ μ¶”κ°€ μ κ³µ

### 2. API μ•μ •μ„± ν–¥μƒ
- **κ°λ³„ μ—λ¬ κ²©λ¦¬**: ν•λ‚μ μ±„λ„/ν”λ μ΄λ¦¬μ¤νΈ μ΅°ν μ‹¤ν¨κ°€ μ „μ²΄ μ‘λ‹µμ— μν–¥μ„ μ£Όμ§€ μ•μ
- **μλ™ λ³µκµ¬ λ©”μ»¤λ‹μ¦**: μΈλ„¤μΌ μ—†λ” μ±„λ„μ κ²½μ° μλ™μΌλ΅ YouTube APIμ—μ„ μ •λ³΄ λ³΄μ™„
- **μΌκ΄€λ μ‘λ‹µ κµ¬μ΅°**: λ¨λ“  μ°¨νΈ APIκ°€ λ™μΌν• μ„±κ³µ/μ‹¤ν¨ κµ¬μ΅°λ¥Ό μ‚¬μ©

### 3. μ μ§€λ³΄μμ„± κ°μ„ 
- **νƒ€μ… μ•μ •μ„±**: TypeScript νƒ€μ… μ •μλ¥Ό ν†µν• μ»΄νμΌ νƒ€μ„ μ—λ¬ κ²€μ¶
- **μ½”λ“ μ¬μ‚¬μ©μ„±**: κ³µν†µ μ‘λ‹µ κµ¬μ΅° λ° ν—¬νΌ ν΄λμ¤ ν™μ©
- **λ¬Έμ„ν™”**: κ° νƒ€μ…κ³Ό λ©”μ„λ“μ— λ€ν• μƒμ„Έν• JSDoc μ£Όμ„ μ¶”κ°€

## π€ λ°°ν¬ μ¤€λΉ„μ‚¬ν•­

1. **ν™κ²½ λ³€μ ν™•μΈ**: `YOUTUBE_API_KEY` μ„¤μ • ν•„μ”
2. **λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ…**: κΈ°μ΅΄ ν…μ΄λΈ” κµ¬μ΅° λ³€κ²½ μ—†μ
3. **ν΄λΌμ΄μ–ΈνΈ μ—…λ°μ΄νΈ**: μƒλ΅μ΄ μ‘λ‹µ κµ¬μ΅°μ— λ§λ” ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μ—…λ°μ΄νΈ ν•„μ”

## π“ μ¶”κ°€ κ°μ„  μ‚¬ν•­

### ν–¥ν›„ κ³ λ ¤μ‚¬ν•­
1. **μΊμ‹± λ©”μ»¤λ‹μ¦**: μμ£Ό μ΅°νλλ” μ±„λ„ μ •λ³΄μ— λ€ν• μΊμ‹± κµ¬ν„
2. **λ°°μΉ μ²λ¦¬**: μ—¬λ¬ μ±„λ„/ν”λ μ΄λ¦¬μ¤νΈ μ •λ³΄λ¥Ό ν• λ²μ— μ΅°νν•λ” λ°°μΉ API κ°μ„ 
3. **λ¨λ‹ν„°λ§**: API μ‘λ‹µ μ‹κ°„ λ° μ‹¤ν¨μ¨ λ¨λ‹ν„°λ§ μ¶”κ°€

μ΄λ² λ³€κ²½μ„ ν†µν•΄ μ°¨νΈ APIμ μ•μ •μ„±κ³Ό μ‚¬μ©μ„±μ΄ ν¬κ² κ°μ„ λμ—μΌλ©°, ν΄λΌμ΄μ–ΈνΈμ—μ„ λ” λ‚μ€ μ‚¬μ©μ κ²½ν—μ„ μ κ³µν•  μ μκ² λμ—μµλ‹λ‹¤.
