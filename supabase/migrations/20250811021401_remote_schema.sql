revoke delete on table "public"."MusicInfoJoin" from "anon";

revoke insert on table "public"."MusicInfoJoin" from "anon";

revoke references on table "public"."MusicInfoJoin" from "anon";

revoke select on table "public"."MusicInfoJoin" from "anon";

revoke trigger on table "public"."MusicInfoJoin" from "anon";

revoke truncate on table "public"."MusicInfoJoin" from "anon";

revoke update on table "public"."MusicInfoJoin" from "anon";

revoke delete on table "public"."MusicInfoJoin" from "authenticated";

revoke insert on table "public"."MusicInfoJoin" from "authenticated";

revoke references on table "public"."MusicInfoJoin" from "authenticated";

revoke select on table "public"."MusicInfoJoin" from "authenticated";

revoke trigger on table "public"."MusicInfoJoin" from "authenticated";

revoke truncate on table "public"."MusicInfoJoin" from "authenticated";

revoke update on table "public"."MusicInfoJoin" from "authenticated";

revoke delete on table "public"."MusicInfoJoin" from "service_role";

revoke insert on table "public"."MusicInfoJoin" from "service_role";

revoke references on table "public"."MusicInfoJoin" from "service_role";

revoke select on table "public"."MusicInfoJoin" from "service_role";

revoke trigger on table "public"."MusicInfoJoin" from "service_role";

revoke truncate on table "public"."MusicInfoJoin" from "service_role";

revoke update on table "public"."MusicInfoJoin" from "service_role";

revoke delete on table "public"."MusicStartJoin" from "anon";

revoke insert on table "public"."MusicStartJoin" from "anon";

revoke references on table "public"."MusicStartJoin" from "anon";

revoke select on table "public"."MusicStartJoin" from "anon";

revoke trigger on table "public"."MusicStartJoin" from "anon";

revoke truncate on table "public"."MusicStartJoin" from "anon";

revoke update on table "public"."MusicStartJoin" from "anon";

revoke delete on table "public"."MusicStartJoin" from "authenticated";

revoke insert on table "public"."MusicStartJoin" from "authenticated";

revoke references on table "public"."MusicStartJoin" from "authenticated";

revoke select on table "public"."MusicStartJoin" from "authenticated";

revoke trigger on table "public"."MusicStartJoin" from "authenticated";

revoke truncate on table "public"."MusicStartJoin" from "authenticated";

revoke update on table "public"."MusicStartJoin" from "authenticated";

revoke delete on table "public"."MusicStartJoin" from "service_role";

revoke insert on table "public"."MusicStartJoin" from "service_role";

revoke references on table "public"."MusicStartJoin" from "service_role";

revoke select on table "public"."MusicStartJoin" from "service_role";

revoke trigger on table "public"."MusicStartJoin" from "service_role";

revoke truncate on table "public"."MusicStartJoin" from "service_role";

revoke update on table "public"."MusicStartJoin" from "service_role";

revoke delete on table "public"."PlaylistHeadAccessDate" from "anon";

revoke insert on table "public"."PlaylistHeadAccessDate" from "anon";

revoke references on table "public"."PlaylistHeadAccessDate" from "anon";

revoke select on table "public"."PlaylistHeadAccessDate" from "anon";

revoke trigger on table "public"."PlaylistHeadAccessDate" from "anon";

revoke truncate on table "public"."PlaylistHeadAccessDate" from "anon";

revoke update on table "public"."PlaylistHeadAccessDate" from "anon";

revoke delete on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke insert on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke references on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke select on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke trigger on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke truncate on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke update on table "public"."PlaylistHeadAccessDate" from "authenticated";

revoke delete on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke insert on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke references on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke select on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke trigger on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke truncate on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke update on table "public"."PlaylistHeadAccessDate" from "service_role";

revoke delete on table "public"."RecentSqoopedPlaylists" from "anon";

revoke insert on table "public"."RecentSqoopedPlaylists" from "anon";

revoke references on table "public"."RecentSqoopedPlaylists" from "anon";

revoke select on table "public"."RecentSqoopedPlaylists" from "anon";

revoke trigger on table "public"."RecentSqoopedPlaylists" from "anon";

revoke truncate on table "public"."RecentSqoopedPlaylists" from "anon";

revoke update on table "public"."RecentSqoopedPlaylists" from "anon";

revoke delete on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke insert on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke references on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke select on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke trigger on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke truncate on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke update on table "public"."RecentSqoopedPlaylists" from "authenticated";

revoke delete on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke insert on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke references on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke select on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke trigger on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke truncate on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke update on table "public"."RecentSqoopedPlaylists" from "service_role";

revoke delete on table "public"."SendToPlaylistDate" from "anon";

revoke insert on table "public"."SendToPlaylistDate" from "anon";

revoke references on table "public"."SendToPlaylistDate" from "anon";

revoke select on table "public"."SendToPlaylistDate" from "anon";

revoke trigger on table "public"."SendToPlaylistDate" from "anon";

revoke truncate on table "public"."SendToPlaylistDate" from "anon";

revoke update on table "public"."SendToPlaylistDate" from "anon";

revoke delete on table "public"."SendToPlaylistDate" from "authenticated";

revoke insert on table "public"."SendToPlaylistDate" from "authenticated";

revoke references on table "public"."SendToPlaylistDate" from "authenticated";

revoke select on table "public"."SendToPlaylistDate" from "authenticated";

revoke trigger on table "public"."SendToPlaylistDate" from "authenticated";

revoke truncate on table "public"."SendToPlaylistDate" from "authenticated";

revoke update on table "public"."SendToPlaylistDate" from "authenticated";

revoke delete on table "public"."SendToPlaylistDate" from "service_role";

revoke insert on table "public"."SendToPlaylistDate" from "service_role";

revoke references on table "public"."SendToPlaylistDate" from "service_role";

revoke select on table "public"."SendToPlaylistDate" from "service_role";

revoke trigger on table "public"."SendToPlaylistDate" from "service_role";

revoke truncate on table "public"."SendToPlaylistDate" from "service_role";

revoke update on table "public"."SendToPlaylistDate" from "service_role";

revoke delete on table "public"."Version_iOS" from "anon";

revoke insert on table "public"."Version_iOS" from "anon";

revoke references on table "public"."Version_iOS" from "anon";

revoke select on table "public"."Version_iOS" from "anon";

revoke trigger on table "public"."Version_iOS" from "anon";

revoke truncate on table "public"."Version_iOS" from "anon";

revoke update on table "public"."Version_iOS" from "anon";

revoke delete on table "public"."Version_iOS" from "authenticated";

revoke insert on table "public"."Version_iOS" from "authenticated";

revoke references on table "public"."Version_iOS" from "authenticated";

revoke select on table "public"."Version_iOS" from "authenticated";

revoke trigger on table "public"."Version_iOS" from "authenticated";

revoke truncate on table "public"."Version_iOS" from "authenticated";

revoke update on table "public"."Version_iOS" from "authenticated";

revoke delete on table "public"."Version_iOS" from "service_role";

revoke insert on table "public"."Version_iOS" from "service_role";

revoke references on table "public"."Version_iOS" from "service_role";

revoke select on table "public"."Version_iOS" from "service_role";

revoke trigger on table "public"."Version_iOS" from "service_role";

revoke truncate on table "public"."Version_iOS" from "service_role";

revoke update on table "public"."Version_iOS" from "service_role";

revoke delete on table "public"."YTChannelInfo" from "anon";

revoke insert on table "public"."YTChannelInfo" from "anon";

revoke references on table "public"."YTChannelInfo" from "anon";

revoke select on table "public"."YTChannelInfo" from "anon";

revoke trigger on table "public"."YTChannelInfo" from "anon";

revoke truncate on table "public"."YTChannelInfo" from "anon";

revoke update on table "public"."YTChannelInfo" from "anon";

revoke delete on table "public"."YTChannelInfo" from "authenticated";

revoke insert on table "public"."YTChannelInfo" from "authenticated";

revoke references on table "public"."YTChannelInfo" from "authenticated";

revoke select on table "public"."YTChannelInfo" from "authenticated";

revoke trigger on table "public"."YTChannelInfo" from "authenticated";

revoke truncate on table "public"."YTChannelInfo" from "authenticated";

revoke update on table "public"."YTChannelInfo" from "authenticated";

revoke delete on table "public"."YTChannelInfo" from "service_role";

revoke insert on table "public"."YTChannelInfo" from "service_role";

revoke references on table "public"."YTChannelInfo" from "service_role";

revoke select on table "public"."YTChannelInfo" from "service_role";

revoke trigger on table "public"."YTChannelInfo" from "service_role";

revoke truncate on table "public"."YTChannelInfo" from "service_role";

revoke update on table "public"."YTChannelInfo" from "service_role";

revoke delete on table "public"."YTOfficialPlaylist" from "anon";

revoke insert on table "public"."YTOfficialPlaylist" from "anon";

revoke references on table "public"."YTOfficialPlaylist" from "anon";

revoke select on table "public"."YTOfficialPlaylist" from "anon";

revoke trigger on table "public"."YTOfficialPlaylist" from "anon";

revoke truncate on table "public"."YTOfficialPlaylist" from "anon";

revoke update on table "public"."YTOfficialPlaylist" from "anon";

revoke delete on table "public"."YTOfficialPlaylist" from "authenticated";

revoke insert on table "public"."YTOfficialPlaylist" from "authenticated";

revoke references on table "public"."YTOfficialPlaylist" from "authenticated";

revoke select on table "public"."YTOfficialPlaylist" from "authenticated";

revoke trigger on table "public"."YTOfficialPlaylist" from "authenticated";

revoke truncate on table "public"."YTOfficialPlaylist" from "authenticated";

revoke update on table "public"."YTOfficialPlaylist" from "authenticated";

revoke delete on table "public"."YTOfficialPlaylist" from "service_role";

revoke insert on table "public"."YTOfficialPlaylist" from "service_role";

revoke references on table "public"."YTOfficialPlaylist" from "service_role";

revoke select on table "public"."YTOfficialPlaylist" from "service_role";

revoke trigger on table "public"."YTOfficialPlaylist" from "service_role";

revoke truncate on table "public"."YTOfficialPlaylist" from "service_role";

revoke update on table "public"."YTOfficialPlaylist" from "service_role";

revoke delete on table "public"."YTPlaylistHead" from "anon";

revoke insert on table "public"."YTPlaylistHead" from "anon";

revoke references on table "public"."YTPlaylistHead" from "anon";

revoke select on table "public"."YTPlaylistHead" from "anon";

revoke trigger on table "public"."YTPlaylistHead" from "anon";

revoke truncate on table "public"."YTPlaylistHead" from "anon";

revoke update on table "public"."YTPlaylistHead" from "anon";

revoke delete on table "public"."YTPlaylistHead" from "authenticated";

revoke insert on table "public"."YTPlaylistHead" from "authenticated";

revoke references on table "public"."YTPlaylistHead" from "authenticated";

revoke select on table "public"."YTPlaylistHead" from "authenticated";

revoke trigger on table "public"."YTPlaylistHead" from "authenticated";

revoke truncate on table "public"."YTPlaylistHead" from "authenticated";

revoke update on table "public"."YTPlaylistHead" from "authenticated";

revoke delete on table "public"."YTPlaylistHead" from "service_role";

revoke insert on table "public"."YTPlaylistHead" from "service_role";

revoke references on table "public"."YTPlaylistHead" from "service_role";

revoke select on table "public"."YTPlaylistHead" from "service_role";

revoke trigger on table "public"."YTPlaylistHead" from "service_role";

revoke truncate on table "public"."YTPlaylistHead" from "service_role";

revoke update on table "public"."YTPlaylistHead" from "service_role";

revoke delete on table "public"."YTVideoPlaylist" from "anon";

revoke insert on table "public"."YTVideoPlaylist" from "anon";

revoke references on table "public"."YTVideoPlaylist" from "anon";

revoke select on table "public"."YTVideoPlaylist" from "anon";

revoke trigger on table "public"."YTVideoPlaylist" from "anon";

revoke truncate on table "public"."YTVideoPlaylist" from "anon";

revoke update on table "public"."YTVideoPlaylist" from "anon";

revoke delete on table "public"."YTVideoPlaylist" from "authenticated";

revoke insert on table "public"."YTVideoPlaylist" from "authenticated";

revoke references on table "public"."YTVideoPlaylist" from "authenticated";

revoke select on table "public"."YTVideoPlaylist" from "authenticated";

revoke trigger on table "public"."YTVideoPlaylist" from "authenticated";

revoke truncate on table "public"."YTVideoPlaylist" from "authenticated";

revoke update on table "public"."YTVideoPlaylist" from "authenticated";

revoke delete on table "public"."YTVideoPlaylist" from "service_role";

revoke insert on table "public"."YTVideoPlaylist" from "service_role";

revoke references on table "public"."YTVideoPlaylist" from "service_role";

revoke select on table "public"."YTVideoPlaylist" from "service_role";

revoke trigger on table "public"."YTVideoPlaylist" from "service_role";

revoke truncate on table "public"."YTVideoPlaylist" from "service_role";

revoke update on table "public"."YTVideoPlaylist" from "service_role";

drop function if exists "public"."findPlaylistMusics"();

drop function if exists "public"."getheads2"(ids character varying[]);

set check_function_bodies = off;

CREATE OR REPLACE FUNCTION public.get_is_shazamed(playlistid character varying)
 RETURNS boolean
 LANGUAGE plpgsql
AS $function$
DECLARE
  is_shazamed BOOLEAN; -- 결과를 저장할 변수 선언
BEGIN
    SELECT "isShazamed" 
    INTO is_shazamed
    FROM "YTPlaylistHead" AS head
    WHERE head."id" = playlistid;

    RETURN is_shazamed; -- 변수 값을 반환
end
$function$
;

CREATE OR REPLACE FUNCTION public.get_weekly_most_sqooped_playlists_v1(now_date date, limit_count integer)
 RETURNS SETOF character varying
 LANGUAGE plpgsql
AS $function$
begin
  return query
    select
      s.id as id
    from "WeeklyMostSqoopedPlaylists" as s
      where DATE_TRUNC('week', now_date)::DATE = s.date
      order by s.sqoop_count desc, s.id asc
    limit limit_count;
end
$function$
;

CREATE OR REPLACE FUNCTION public.getheaddatas(ids character varying[])
 RETURNS TABLE(id character varying, "originURL" text, title text, "thumbnailURLString" text, "insertedDate" timestamp with time zone, "isShazamed" boolean, "playlistType" "YTPlaylistType", "channelID" character varying, "channelName" text)
 LANGUAGE plpgsql
AS $function$
begin
  return query
  select 
   head.id as "id",
   head."originURL" as "originURL",
   head."title" as "title",
   head."thumbnailURLString" as "thumbnailURLString",
   head."insertedDate" as "insertedDate",
   head."isShazamed" as "isShazamed",
   head."playlistType" as "playlistType",
   head."channelID" as "channelID",
    channel."name" as "channelName"
  from "YTPlaylistHead" as head
  inner join "YTChannelInfo" as channel on head."channelID" = channel.id
  where head.id = ANY(ids)
  order by array_position(ids, head.id);
end
$function$
;

CREATE OR REPLACE FUNCTION public.getheads(ids character varying[])
 RETURNS TABLE(id character varying, "originURL" text, title text, "thumbnailURLString" text, "insertedDate" timestamp with time zone, "isShazamed" boolean, "playlistType" "YTPlaylistType", "channelID" character varying, "channelName" text)
 LANGUAGE plpgsql
AS $function$
begin
  return query
  select 
    head.id as "id",
    head."originURL" as "originURL",
    head."title" as "title",
    head."thumbnailURLString" as "thumbnailURLString",
    head."insertedDate" as "insertedDate",
    head."isShazamed" as "isShazamed",
    head."playlistType" as "playlistType",
    head."channelID" as "channelID",
    channel."name" as "channelName"
  from "YTPlaylistHead" as head
  inner join "YTChannelInfo" as channel on head."channelID" = channel.id
  where head.id = ANY(ids)
  order by array_position(ids, head.id);
end
$function$
;

CREATE OR REPLACE FUNCTION public.getmetadatas(ids character varying[])
 RETURNS TABLE(id character varying, "originURL" text, title text, "thumbnailURLString" text, "insertedDate" timestamp with time zone, "isShazamed" boolean, "playlistType" "YTPlaylistType", "channelID" character varying, "channelName" text)
 LANGUAGE plpgsql
AS $function$
begin
  return query
  select 
    meta.id as "id",
    meta."originURL" as "originURL",
    meta."title" as "title",
    meta."thumbnailURLString" as "thumbnailURLString",
    meta."insertedDate" as "insertedDate",
    meta."isShazamed" as "isShazamed",
    meta."playlistType" as "playlistType",
    meta."channelID" as "channelID",
    channel."name" as "channelName"
  from "YTPlaylistMetaData" as meta
  inner join "YTChannelInfo" as channel on meta."channelID" = channel.id
  where meta.id = ANY(ids)
  order by array_position(ids, meta.id);
end
$function$
;

CREATE OR REPLACE FUNCTION public.gettotalplaylistcount()
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
  begin
    RETURN (SELECT COUNT(*) FROM "YTPlaylistHead");
  end
$function$
;

CREATE OR REPLACE FUNCTION public.gettotalsongcount()
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
  begin
    RETURN (SELECT COUNT(DISTINCT "ISRC") FROM "MusicInfoJoin");
  end
$function$
;

CREATE OR REPLACE FUNCTION public.headsaccessbydatedesc(limitnumber integer)
 RETURNS SETOF character varying
 LANGUAGE plpgsql
AS $function$
  begin
    RETURN QUERY
    select
      "YTPlaylistHead"."id" as "id"
    from
    "YTPlaylistHead"
      inner join "PlaylistHeadAccessDate" on "PlaylistHeadAccessDate".id = "YTPlaylistHead".id
      order by "PlaylistHeadAccessDate".access DESC
    LIMIT limitNumber;
  end
$function$
;

CREATE OR REPLACE FUNCTION public.insert_sqooped_log(playlist_id character varying, now_date timestamp with time zone, country_code character varying DEFAULT NULL::character varying)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
declare
    watch int;
    today_date timestamptz; -- access 변수가 필요하다면 함수의 입력으로 받거나 정의해야 함
begin
    -- 오늘 날짜의 00:00:00 설정
    today_date := date_trunc('day', now_date::timestamp);
    watch := (extract(hour from now_date::timestamp))::int / 3;

    -- "SendToPlaylistDate" 테이블에 삽입 (충돌 시 업데이트)
    insert into "SendToPlaylistDate" 
    ("id", "watchSystem", "sqooped_date", "country_code", "sqoop_count")
    values 
    (playlist_id, watch, today_date, country_code, 1)
    on conflict ("id", "watchSystem", "sqooped_date")
    do update set "sqoop_count" = excluded."sqoop_count" + 1;

    -- "RecentSqoopedPlaylists" 테이블에 삽입 (충돌 시 업데이트)
    insert into "RecentSqoopedPlaylists" ("id", "sqooped_date")
    values (playlist_id, now_date)
    on conflict ("id")
    do update set sqooped_date = now_date;
    return;
end;
$function$
;

CREATE OR REPLACE FUNCTION public.maintain_latest_100_with_playlist_head_access_date()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    DELETE FROM "PlaylistHeadAccessDate"
    WHERE id NOT IN (
        SELECT id FROM (
            SELECT id FROM "PlaylistHeadAccessDate"
            ORDER BY access DESC
            LIMIT 100
        ) AS subquery
    );
    RETURN NULL; -- AFTER 트리거에서는 RETURN NULL 사용
END;
$function$
;

CREATE OR REPLACE FUNCTION public.maintain_latest_100_with_recent_sqooped_playlists()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    DELETE FROM "RecentSqoopedPlaylists"
    WHERE id NOT IN (
        SELECT id FROM (
            SELECT id FROM "RecentSqoopedPlaylists"
            ORDER BY sqooped_date DESC
            LIMIT 100
        ) AS subquery
    );
    RETURN NULL; -- AFTER 트리거에서는 RETURN NULL 사용
END;
$function$
;

CREATE OR REPLACE FUNCTION public.metadataaccessbydatedesc(limitnumber integer)
 RETURNS SETOF character varying
 LANGUAGE plpgsql
AS $function$
  begin
    RETURN QUERY
    select
      "YTPlaylistMetaData"."id" as "id"
    from
    "YTPlaylistMetaData"
      inner join "MetaDataAccessDate" on "MetaDataAccessDate".id = "YTPlaylistMetaData".id
      order by "MetaDataAccessDate".access DESC
    LIMIT limitNumber;
  end
$function$
;

CREATE OR REPLACE FUNCTION public.playlistaccessbydatedesc(limitnumber integer)
 RETURNS SETOF character varying
 LANGUAGE plpgsql
AS $function$
  begin
    RETURN QUERY
    select
      "YTPlaylistHead"."id" as "id"
    from
    "YTPlaylistHead"
      inner join "PlaylistHeadAccessDate" on "PlaylistHeadAccessDate".id = "YTPlaylistHead".id
      order by "PlaylistHeadAccessDate".access DESC
    LIMIT limitNumber;
  end
$function$
;

CREATE OR REPLACE FUNCTION public.redirect_delete_to_access()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN

    DELETE FROM "PlaylistHeadAccessDate"
    WHERE id = OLD.id;

    RETURN NULL; -- 기존 뷰에는 아무것도 삽입하지 않음
END;
$function$
;

CREATE OR REPLACE FUNCTION public.redirect_delete_to_head()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN

    DELETE FROM "YTPlaylistHead"
    WHERE id = OLD.id;

    RETURN NULL; -- 기존 뷰에는 아무것도 삽입하지 않음
END;
$function$
;

CREATE OR REPLACE FUNCTION public.redirect_insert_to_access()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- 데이터 삽입을 새 테이블로 리다이렉트
    INSERT INTO "PlaylistHeadAccessDate" (
      "id",
      "access"
    ) -- 필요한 컬럼 명시
    VALUES (
      NEW."id",
      NEW."access"
      );

    RETURN NULL; -- 기존 뷰에는 아무것도 삽입하지 않음
END;
$function$
;

CREATE OR REPLACE FUNCTION public.redirect_insert_to_head()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- 데이터 삽입을 새 테이블로 리다이렉트
    INSERT INTO "YTPlaylistHead" (
      "id",
      "originURL",
      "insertedDate",
      "isShazamed",
      "thumbnailURLString",
      "playlistType",
      "title",
      "channelID"
    ) -- 필요한 컬럼 명시
    VALUES (
      NEW."id",
      NEW."originURL",
      NEW."insertedDate",
      NEW."isShazamed",
      NEW."thumbnailURLString",
      NEW."playlistType",
      NEW."title",
      NEW."channelID"
      );

    RETURN NULL; -- 기존 뷰에는 아무것도 삽입하지 않음
END;
$function$
;

CREATE OR REPLACE FUNCTION public.redirect_update_to_access()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- 데이터 삽입을 새 테이블로 리다이렉트
    UPDATE "PlaylistHeadAccessDate" 
    set "id" = NEW."id",
    "access" = NEW."access"
    where "id" = OLD."id";

    RETURN NEW; -- 기존 뷰에는 아무것도 삽입하지 않음
END;
$function$
;

CREATE OR REPLACE FUNCTION public.redirect_update_to_head()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- 데이터 삽입을 새 테이블로 리다이렉트
    UPDATE "YTPlaylistHead" 
    set "id" = NEW."id",
    "originURL" = NEW."originURL",
    "insertedDate" = NEW."insertedDate",
    "isShazamed" = NEW."isShazamed",
    "thumbnailURLString" = NEW."thumbnailURLString",
    "playlistType" = NEW."playlistType",
    "title" = NEW."title",
    "channelID" = NEW."channelID"
    where "id" = OLD."id";

    RETURN NEW; -- 기존 뷰에는 아무것도 삽입하지 않음
END;
$function$
;


